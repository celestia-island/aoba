# Single Station - Master Mode - Discrete Inputs (02) Register Type
# Test ID: tui_master_discrete_inputs
# Station: ID=1, Type=DiscreteInputs, Address=0x0000, Length=10

[manifest]
id = "single_station_master_discrete_inputs"
description = "Single station Master mode with Discrete Inputs registers"
station_id = 1
register_type = "DiscreteInputs"
start_address = 0x0000
register_count = 10
is_master = true

init_order = [
  "navigate_to_entry",
  "enter_config_panel",
  "navigate_to_business_config",
  "enter_modbus_panel",
  "create_station",
  "configure_station_fields",
  "edit_registers",
  "save_configuration",
  "verify_port_enabled"
]

recycle_order = [
  "edit_registers",
  "save_configuration",
  "verify_mock_data"
]

# Navigation steps (same as coils)
[[workflow.navigate_to_entry]]
description = "Initial navigation to entry page"
verify = "/tmp/vcom1"
at_line = 2

[[workflow.enter_config_panel]]
description = "Press Enter on selected port"
key = "enter"

[[workflow.navigate_to_business_config]]
description = "Navigate to Business Configuration"
key = "down"

[[workflow.enter_modbus_panel]]
description = "Enter Modbus panel"
key = "enter"

[[workflow.create_station]]
description = "Create new station"
key = "enter"

# Configure Station ID (same as coils)
[[workflow.configure_station_fields]]
description = "Navigate to Station ID"
key = "down"

[[workflow.configure_station_fields]]
key = "enter"

[[workflow.configure_station_fields]]
key = "ctrl-a"

[[workflow.configure_station_fields]]
key = "backspace"

[[workflow.configure_station_fields]]
input = "decimal"
value = 1

[[workflow.configure_station_fields]]
key = "enter"

[[workflow.configure_station_fields]]
sleep_ms = 200

# Configure Register Type - Select Discrete Inputs
[[workflow.configure_station_fields]]
description = "Navigate to Register Type"
key = "down"

[[workflow.configure_station_fields]]
key = "enter"

[[workflow.configure_station_fields]]
description = "Select Discrete Inputs"
key = "right"

[[workflow.configure_station_fields]]
key = "enter"

[[workflow.configure_station_fields]]
sleep_ms = 200

# Configure Start Address (same as coils)
[[workflow.configure_station_fields]]
description = "Navigate to Start Address"
key = "down"

[[workflow.configure_station_fields]]
key = "enter"

[[workflow.configure_station_fields]]
key = "ctrl-a"

[[workflow.configure_station_fields]]
key = "backspace"

[[workflow.configure_station_fields]]
input = "hex"
value = 0x0000

[[workflow.configure_station_fields]]
key = "enter"

[[workflow.configure_station_fields]]
sleep_ms = 200

# Configure Register Count (same as coils)
[[workflow.configure_station_fields]]
description = "Navigate to Register Count"
key = "down"

[[workflow.configure_station_fields]]
key = "enter"

[[workflow.configure_station_fields]]
key = "ctrl-a"

[[workflow.configure_station_fields]]
key = "backspace"

[[workflow.configure_station_fields]]
input = "decimal"
value = 10

[[workflow.configure_station_fields]]
key = "enter"

[[workflow.configure_station_fields]]
sleep_ms = 1000

# Edit 10 registers (condensed - same pattern as coils)
[[workflow.edit_registers]]
description = "Edit registers 0-9"
# (Register editing steps would follow same pattern as coils.toml)
# For brevity, showing first register only

[[workflow.edit_registers]]
description = "Register 0 - Enter edit mode"
key = "enter"

[[workflow.edit_registers]]
input = "decimal"
index = 0

[[workflow.edit_registers]]
key = "enter"

[[workflow.edit_registers]]
mock_path = "ports['/tmp/vcom1'].modbus_masters[0].registers[0]"
mock_set_value_with_placeholder = "{{#0}}"

[[workflow.edit_registers]]
key = "right"

# Save configuration
[[workflow.save_configuration]]
key = "ctrl-s"

[[workflow.save_configuration]]
sleep_ms = 5000

[[workflow.verify_port_enabled]]
mock_verify_path = "ports['/tmp/vcom1'].enabled"
mock_verify_value = true
